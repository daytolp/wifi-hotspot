<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>GraphiQL</title>
    <!-- CDN -->
    <link rel="stylesheet" href="https://unpkg.com/graphiql@2.4.0/graphiql.min.css" crossorigin="anonymous" />
    <style>html,body{height:100%;margin:0}#graphiql{height:100vh}</style>
</head>
<body>
<div id="graphiql">Cargando...</div>

<script src="https://unpkg.com/react@18.3.1/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18.3.1/umd/react-dom.production.min.js" crossorigin></script>
<script src="https://unpkg.com/graphiql@2.4.0/graphiql.min.js" crossorigin></script>

<script>
    const params = new URLSearchParams(location.search);
    const path = params.get("path") || "/graphql";
    const url = `${location.origin}${path}`;
    const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
    const subscriptionUrl = `${wsProtocol}//${location.host}${path}`;

    const fetcher = GraphiQL.createFetcher({ url, subscriptionUrl });

    ReactDOM.render(
      React.createElement(GraphiQL, {
        fetcher,
        defaultVariableEditorOpen: true,
        headerEditorEnabled: true,
        shouldPersistHeaders: true
      }),
      document.getElementById('graphiql')
    );
</script>
</body>
</html>